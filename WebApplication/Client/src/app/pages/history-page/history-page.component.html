<!-- <div class="page"> -->
  <!-- <h1 class="page__heading">{{ "PAGES.History.Heading" | translate }}</h1> -->

  <section class="page__section section section--table">
    <h2 class="section__title" id="pageSectionTitle">{{ "PAGES.History.SectionTitle" | translate }}</h2>

    <div class="progress-linear progress-linear--tiny" *ngIf="loading">
      <div class="container"></div>
    </div>

<!-- [scrollbarH]="scrollbarHorizontal" -->
    <div class="section__content">
      <ngx-datatable class="table" #table
        [rows]="rows"

        [columnMode]="'force'"
        [sorts]="sorts"
        [headerHeight]="53"
        [rowHeight]="'auto'"
        [footerHeight]="135"
        [reorderable]="false"
        [loadingIndicator]="loading"
        [count]="page.totalElements"
        [offset]="page.pageNumber"
        [limit]="page.size"
        [externalSorting]="true"
        (sort)="onSort($event)"
        [externalPaging]="true"
        [scrollbarH]="true"
        (page)='setPage($event)'
        [messages]="messages">

        <ngx-datatable-column prop="date" [draggable]="false" [resizeable]="false" [width]="150">
          <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
            <span class="datatable-header-cell-wrapper" (click)="sort()">
              {{ "PAGES.History.Table.Columns.Date" | translate }}
            </span>
          </ng-template>

          <ng-template let-timestamp="value" ngx-datatable-cell-template>
            <!-- {{ timestamp * 1000 | date:'yyyy-MM-dd HH:mm:ss' }} -->
            {{ timestamp * 1000 | date:'short':'':locale }}
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column prop="amount" [draggable]="false" [resizeable]="false" [minWidth]="125">
          <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
            <span class="datatable-header-cell-wrapper" (click)="sort()">
              {{ "PAGES.History.Table.Columns.Amount" | translate }}
            </span>
          </ng-template>

          <ng-template let-amount="value" let-row="row" ngx-datatable-cell-template>
            <span>
              {{ amount | number:'1.2-2':locale }}
            </span>
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column prop="type" [draggable]="false" [resizeable]="false" [minWidth]="135">
          <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
            <span class="datatable-header-cell-wrapper ml-3" (click)="sort()">
              {{ "PAGES.History.Table.Columns.Type" | translate }}
            </span>
          </ng-template>

          <ng-template let-type="value" ngx-datatable-cell-template let-row="row">
            <span *ngIf="type === 'withdraw' && row.status !== 1">
              <svg class="icon icon--fix icon--gold" width="16px" height="15px">
                <use xlink:href="#withdraw"></use>
              </svg>
            </span>

            <span *ngIf="(type === 'deposit' || type === 'goldsell' || type === 'goldbuy' || type === 'hwtransfer') && row.status !== 1">
              <svg class="icon icon--fix icon--gold" width="16px" height="15px">
                <use xlink:href="#deposit"></use>
              </svg>
            </span>

            <img *ngIf="row.status === 1" alt="Processing..." width="17" height="17" class="form-loader" src="assets/img/loader-gold-bg-white.gif">

            <span class="text-uppercase">
              {{('PAGES.History.Types.' + type.toLowerCase()) | translate}}
            </span>

          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column prop="fee" [draggable]="false" [resizeable]="false" [minWidth]="95" [width]="100">
          <ng-template let-column="column" let-sort="sortFn" ngx-datatable-header-template>
            <span class="datatable-header-cell-wrapper" (click)="sort()">
              {{ "PAGES.History.Table.Columns.Fee" | translate }}
            </span>
          </ng-template>

          <ng-template let-fee="value" let-row="row" ngx-datatable-cell-template>
            <span *ngIf="fee && fee > 0; else noFeeBlock">
              {{ fee?.prefix }}
              {{ fee | number:'1.0-2':locale }}
              {{ fee?.suffix }}
              <!-- {{ fee | currency:row.currency.code:'symbol':'1.2-2':locale }} -->
            </span>

            <ng-template #noFeeBlock> - </ng-template>
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column prop="status" [draggable]="false" [resizeable]="false" [sortable]="false">
        <ng-template ngx-datatable-header-template>
          {{ "PAGES.History.Table.Columns.Status" | translate }}
        </ng-template>

        <ng-template let-status="value" ngx-datatable-cell-template>
           {{"PAGES.History.Table.Status." + status | translate }}
        </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column prop="comment" [draggable]="false" [resizeable]="false" [sortable]="false">
          <ng-template ngx-datatable-header-template>
            {{ "PAGES.History.Table.Columns.Comment" | translate }}
          </ng-template>

          <ng-template let-comment="value" ngx-datatable-cell-template let-row="row">
            {{ comment }}
            <div *ngIf="row.ethTxId">
              <a href="{{ etherscanLink + row.ethTxId }}" target="_blank">link</a>
            </div>
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-footer>
          <ng-template
            ngx-datatable-footer-template
            let-rowCount="rowCount"
            let-pageSize="pageSize"
            let-selectedCount="selectedCount"
            let-curPage="curPage"
            let-offset="offset">
            <app-pager
              [pagerLeftArrowIcon]="'datatable-icon-left'"
              [pagerRightArrowIcon]="'datatable-icon-right'"
              [pagerPreviousIcon]="'datatable-icon-prev'"
              [pagerNextIcon]="'datatable-icon-skip'"
              [page]="curPage"
              [size]="pageSize"
              [count]="rowCount"
              [hidden]="!((rowCount / pageSize) > 1)"
              (change)="table.onFooterPage($event)">
            </app-pager>
          </ng-template>
        </ngx-datatable-footer>
      </ngx-datatable>
    </div>
  </section>
<!-- </div> -->
