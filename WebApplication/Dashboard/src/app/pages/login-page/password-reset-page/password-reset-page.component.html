<div class="page" *ngIf="page === _pages.Default">
  <h1 class="page__heading">Reset Password</h1>
  <!-- <h1 class="page__heading">{{ "PAGES.Home.Heading" | translate }}</h1> -->

  <div class="page__section section">
    <h2 class="section__title">Reset</h2>

    <div class="section__content section__content--lead">
      <p>To reset your password, enter the email address you use to sign in to GOLDMINT.IO. It can be your email address, an email address you use with one of the social networks, or any email address associated with your account.</p>

      <form name="passwordEmailForm" (ngSubmit)="passwordEmailForm.form.valid && sendConfirmationEmail()" #passwordEmailForm="ngForm" novalidate>
        <div class="form-row align-items-center">
          <div class="form-group col-4 pr-5">
            <label for="inputUsername">Enter Your Email Address</label>
            <input type="email" id="inputEmail" required email
                   name="email" [(ngModel)]="passwordResetModel.email" #email="ngModel"
                   class="form-control"
                   [ngClass]="{'is-invalid': (errors?.Email || !email.valid) && (passwordEmailForm.submitted || !email.pristine)}"
                   (ngModelChange)="errors.Email = false"
                   [readonly]="loading">

            <div class="invalid-feedback" *ngIf="email.errors?.required">
              Email is required
            </div>
            <!-- <div class="invalid-feedback" *ngIf="email.errors?.email">
              Enter valid email address
            </div> -->
            <div class="invalid-feedback" *ngIf="errors?.Email">
              {{ errors?.Email }}
            </div>
          </div>

          <div class="form-group col-auto">
            <re-captcha class="form-captcha" #captchaRef="reCaptcha" (resolved)="captchaResolved($event)" [ngClass]="{'is-invalid': errors?.Captcha && passwordEmailForm.submitted}"></re-captcha>

            <div class="invalid-feedback" *ngIf="errors?.Captcha">
              {{ errors?.Captcha }}
            </div>
          </div>

          <div class="col-auto ml-auto">
            <img *ngIf="loading" alt="Processing..." width="17" height="17" class="form-loader" src="assets/img/loader-gold-bg-white.gif">
            <button class="btn btn-primary" [blur]="buttonBlur" [disabled]="!passwordEmailForm.form.valid || !passwordResetModel.recaptcha || loading">Submit</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="page pt-4" *ngIf="page === _pages.EmailSent">
  <h1 class="page__heading pb-4 mt-1">Password recovery<br> email sent</h1>

  <div class="page__section section">
    <h2 class="section__title">Recovery</h2>

    <div class="section__content section__content--lead">
      <p class="mb-4">We've sent you an email containing a password recovery link. You will be able to reset your password by clicking the link within the next 24 hours. Please click on the button in your email.</p>

      <p class="mb-4">If you don't see the email, be sure to check the spam folder.</p>

      <div class="mb-4 py-2">
        <a routerLink="/signin" class="btn btn-primary">Back to the site</a>
      </div>
    </div>
  </div>
</div>

<div class="page" *ngIf="page === _pages.NewPassword">
  <h1 class="page__heading">Change Password</h1>

  <div class="page__section section">
    <h2 class="section__title">Provide a new password for your account</h2>

    <div class="section__content section__content--lead pb-2">
      <form name="newPasswordForm" (ngSubmit)="newPasswordForm.form.valid && changePassword()" #newPasswordForm="ngForm" novalidate>
        <div class="row">

          <div class="col">
            <div class="form-row align-items-start">
              <div class="form-group col-5">
                <label for="input_NewPassword">New password</label>
                <input type="password" id="input_NewPassword" required minlength="6" maxlength="128"
                       name="newPassword" [(ngModel)]="newPasswordModel.password" #newPassword="ngModel"
                       class="form-control"
                       [ngClass]="{'is-invalid': (errors?.Password || !newPassword.valid) && newPasswordForm.submitted}"
                       (ngModelChange)="errors.Password = false"
                       (input)="onPasswordInput(newPassword)">

                <div class="progress strength-bar">
                  <div class="progress-bar"
                    [ngClass]="{
                      'bg-danger   w-25':  passwordStrength === 1,
                      'bg-warning  w-50':  passwordStrength === 2,
                      'bg-moderate w-75':  passwordStrength === 3,
                      'bg-success  w-100': passwordStrength === 4
                    }"></div>
                </div>

                <div class="invalid-feedback" *ngIf="newPassword.errors?.required">
                  {{ "PAGES.Register.Errors.Password.required" | translate }}
                </div>
                <div class="invalid-feedback" *ngIf="newPassword.errors?.minlength">
                  {{ "PAGES.Register.Errors.Password.minlength" | translate }}
                </div>
                <div class="invalid-feedback" *ngIf="newPassword.errors?.maxlength">
                  {{ "PAGES.Register.Errors.Password.maxlength" | translate }}
                </div>
                <div class="invalid-feedback" *ngIf="errors?.Password">
                  {{ errors?.Password }}
                </div>
              </div>

              <div class="form-group col-6 pl-5">
                <label for="input_NewPasswordRepeat">Confirm password</label>
                <input type="password" id="input_NewPasswordRepeat" required equal="newPassword"
                       name="newPasswordRepeat" [(ngModel)]="newPasswordModel.passwordRepeat" #newPasswordRepeat="ngModel"
                       class="form-control"
                       [ngClass]="{'is-invalid': (errors?.PasswordRepeat || !newPasswordRepeat.valid) && (newPasswordForm.submitted || !newPasswordRepeat.pristine)}"
                       (ngModelChange)="errors.PasswordRepeat = false">

                <div class="invalid-feedback" *ngIf="newPasswordRepeat.errors?.required">
                  {{ "PAGES.Settings.Profile.PasswordSection.Errors.NewPasswordRepeat.required" | translate }}
                </div>
                <div class="invalid-feedback" *ngIf="newPasswordRepeat.errors?.equal">
                  {{ "PAGES.Settings.Profile.PasswordSection.Errors.NewPasswordRepeat.equal" | translate }}
                </div>
                <div class="invalid-feedback" *ngIf="errors?.PasswordRepeat">
                  {{ errors?.PasswordRepeat }}
                </div>
              </div>
            </div>
          </div>

          <div class="col-auto pt-3">
            <img *ngIf="loading" alt="Processing..." width="17" height="17" class="form-loader" src="assets/img/loader-gold-bg-white.gif">
            <button class="btn btn-primary" [blur]="buttonBlur">Submit</button>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>
